language:
  - C

compiler:
  - clang
  - gcc

arch:
  - amd64
  - arm64
  # - ppc64le

script:
  - make -j 2 BEEP_DEBUG_BUILD=yes DESTDIR="$PWD/_i"
  - env BEEP_LOG_LEVEL=999 ./beep || true
  - make -j 2 BEEP_DEBUG_BUILD=yes DESTDIR="$PWD/_i" install
  - ./beep --version > beep-usage.from--version
  # - grep "$(date +%Y)" beep-usage.from--version
  - cat beep-usage.from--version
  - ./beep --help > beep-usage.from--help
  - diff -u beep-usage.txt beep-usage.from--help
  - ls -l
  - ls -lR _i/

matrix:
  include:
    - os: linux
      dist: bionic
    - os: linux
      dist: xenial
    - os: linux
      dist: trusty
